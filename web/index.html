<!DOCTYPE html>
<html>

<head>
  <base href="$FLUTTER_BASE_HREF">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <title>sincro_app_flutter</title>
  <link rel="manifest" href="manifest.json">

  <!-- Mobile Enhancements (PWA) -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Sincro">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

  <!-- Stripe JS -->
  <script src="https://js.stripe.com/v3/"></script>

  <script>
    window.flutterWebRenderer = "canvaskit";
  </script>

  <script>
    // Detecta se est√° em localhost (desenvolvimento)
    const isLocalhost = Boolean(
      window.location.hostname === 'localhost' ||
      window.location.hostname === '[::1]' ||
      window.location.hostname === '127.0.0.1' ||
      window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
    );

    if (isLocalhost) {
      // ===== MODO DEBUG (localhost) =====
      self.FIREBASE_APPCHECK_DEBUG_TOKEN = true;
      console.log('üõ†Ô∏è Modo DEBUG: App Check debug token ativado automaticamente');
      console.log('üìù Procure no console pelo token gerado e registre no Firebase Console > App Check > Gerenciar tokens de depura√ß√£o');
    }
  </script>

  <style>
    body {
      height: 100%;
      background-color: #111827;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    #app-loader {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #111827;
      color: #D1D5DB;
      z-index: 9999;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
    }

    /* Star Comet Loader Animation */
    .logo-loader-container {
      width: 60px;
      height: 60px;
      margin-bottom: 0;
    }

    .comet-assembly {
      transform-origin: 100px 100px;
      animation: orbit 2s linear infinite;
    }

    .star-dynamic {
      transform-origin: center;
      transform-box: fill-box;
      animation: star-fill-sync 2s ease-in-out infinite;
      stroke: #7c3aed;
      stroke-width: 10;
      stroke-linejoin: miter;
      stroke-miterlimit: 10;
    }

    .tail-path {
      stroke: #7c3aed;
      fill: none;
      stroke-dasharray: 1, 300;
      animation: dash-elastic-thick 2s ease-in-out infinite;
    }

    @keyframes orbit {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes star-fill-sync {
      0% {
        fill: #7c3aed;
        transform: scale(1.1);
      }

      15% {
        fill: transparent;
        transform: scale(0.95);
      }

      85% {
        fill: transparent;
        transform: scale(0.95);
      }

      100% {
        fill: #7c3aed;
        transform: scale(1.1);
      }
    }

    @keyframes dash-elastic-thick {
      0% {
        stroke-dasharray: 1, 300;
        stroke-dashoffset: 0;
        stroke-width: 10;
        stroke-linecap: round;
      }

      10% {
        stroke-linecap: round;
      }

      15% {
        stroke-linecap: butt;
      }

      50% {
        stroke-dasharray: 120, 300;
        stroke-dashoffset: -50;
        stroke-width: 22;
        stroke-linecap: butt;
      }

      85% {
        stroke-linecap: butt;
      }

      90% {
        stroke-linecap: round;
      }

      100% {
        stroke-dasharray: 1, 300;
        stroke-dashoffset: -260;
        stroke-width: 10;
        stroke-linecap: round;
      }
    }
  </style>
</head>

<body>
  <!-- Overlay exibido at√© o primeiro frame do Flutter ser renderizado -->
  <div id="app-loader" role="status" aria-live="polite">
    <div class="logo-loader-container">
      <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <g class="comet-assembly">
          <!-- 1. LINHA DIN√ÇMICA -->
          <circle class="tail-path" cx="100" cy="100" r="42" transform="rotate(-90 100 100)" />

          <!-- 2. ESTRELA AFIADA (10px Stroke) -->
          <g transform="translate(100, 58)">
            <polygon class="star-dynamic" points="0,-32 
                             9,-16 
                             28,-16 
                             18,0 
                             28,16 
                             9,16 
                             0,32 
                             -9,16 
                             -28,16 
                             -18,0 
                             -28,-16 
                             -9,-16" />
          </g>
        </g>
      </svg>
    </div>
  </div>

  <script>
    // Esconde o loader assim que o Flutter renderizar seu primeiro frame
    window.addEventListener('flutter-first-frame', function () {
      var el = document.getElementById('app-loader');
      if (el) { el.style.display = 'none'; }
    });
  </script>
  <script src="flutter_bootstrap.js" async></script>
</body>

</html>